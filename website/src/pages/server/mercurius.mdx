# Mercurius

[Mercurius](https://mercurius.dev/) is a high-performance GraphQL adapter for [Fastify](https://www.fastify.io/).

## Installation

```sh npm2yarn
npm i graphql fastify mercurius
```

## Schema

### Basic

```ts filename="examples/server/mercurius/basic.ts"
import Fastify from 'fastify';
import mercurius from 'mercurius';
import { buildSchema } from '@database/<database>/schema/basic';

const app = Fastify();

app.register(mercurius, {
  schema: await buildSchema(),
});

app.listen({ port: 50005 });

console.info('Server is running on http://localhost:50005/graphql');
```

Visit [`http://localhost:50005/graphql`](http://localhost:50005/graphql) to see the server in action.

### Authentication

```ts filename="examples/server/mercurius/authentication.ts"
import Fastify from 'fastify';
import mercurius from 'mercurius';
import { sessionIdFromCookie, sessionIdToCookie } from '@server/common';
import { Context } from '@schema/authentication';
import { buildSchema } from '@database/<database>/schema/authentication';

const app = Fastify();

app.register(mercurius, {
  schema: await buildSchema(),
  context: (req, reply) =>
    ({
      sessionId: sessionIdFromCookie(req.headers['cookie']),
      setSessionId(sessionId) {
        reply.header('set-cookie', sessionIdToCookie(sessionId));
      },
    } satisfies Context),
});

app.listen({ port: 50005 });

console.info('Server is running on http://localhost:50005/graphql');
```

Visit [`http://localhost:50005/graphql`](http://localhost:50005/graphql) to see the server in action.
